apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: argo-workflows
  description: Argo Workflows - Workflow engine for orchestrating parallel jobs on Kubernetes - Helm Chart.
  tags: [cicd, workflows, orchestration, kubernetes]
  links:
    - url: https://argo.192-168-65-16.nip.io
      title: Argo Workflows UI
      icon: workflow
  annotations:
    backstage.io/kubernetes-id: argo-workflows
    backstage.io/kubernetes-namespace: cicd
    backstage.io/kubernetes-label-selector: 'app.kubernetes.io/part-of=argo-workflows'
spec:
  type: service
  lifecycle: production
  owner: platform-team
  system: idp-orchestration

---
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: workflow-controller
  description: Argo Workflow Controller - Manages workflow execution and orchestration.
  tags: [controller, workflows, orchestration]
  annotations:
    backstage.io/kubernetes-id: workflow-controller
    backstage.io/kubernetes-namespace: cicd
    backstage.io/kubernetes-label-selector: 'app.kubernetes.io/name=argo-workflows-workflow-controller'
spec:
  type: service
  lifecycle: production
  owner: platform-team
  system: idp-orchestration
  subComponentOf: argo-workflows

---
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: argo-server
  description: Argo Server - API and UI server for Argo Workflows.
  tags: [server, api, ui, workflows]
  annotations:
    backstage.io/kubernetes-id: argo-server
    backstage.io/kubernetes-namespace: cicd
    backstage.io/kubernetes-label-selector: 'app.kubernetes.io/name=argo-workflows-server'
spec:
  type: service
  lifecycle: production
  owner: platform-team
  system: idp-orchestration
  subComponentOf: argo-workflows

---
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: sonarqube
  description: SonarQube - Code quality and security analysis platform.
  tags: [quality, security, analysis, cicd]
  links:
    - url: https://sonarqube.192-168-65-16.nip.io
      title: SonarQube Dashboard
      icon: analytics
  annotations:
    backstage.io/kubernetes-id: sonarqube
    backstage.io/kubernetes-namespace: cicd
    backstage.io/kubernetes-label-selector: 'app=sonarqube'
spec:
  type: service
  lifecycle: production
  owner: platform-team
  system: idp-quality
  dependsOn:
    - resource:sonarqube-postgresql

---
apiVersion: backstage.io/v1alpha1
kind: Resource
metadata:
  name: sonarqube-postgresql
  description: PostgreSQL - Database for SonarQube analysis data and configuration.
  tags: [database, postgresql, statefulset, storage]
  annotations:
    backstage.io/kubernetes-id: sonarqube-postgresql
    backstage.io/kubernetes-namespace: cicd
    backstage.io/kubernetes-label-selector: 'app.kubernetes.io/name=postgresql,app.kubernetes.io/instance=sonarqube'
spec:
  type: database
  lifecycle: production
  owner: platform-team
  system: idp-quality
