direction: right

classes: { infra: { style.fill: "#0f172a"; style.stroke: "#38bdf8"; style.font-color: white }
           data: { style.fill: "#0f766e"; style.stroke: "#34d399"; style.font-color: white }
           ui: { style.fill: "#7c3aed"; style.stroke: "#a855f7"; style.font-color: white } }

Nodes: {
  class: infra
  Pods: "Workload pods"
  Fluent: "Fluent-bit DaemonSet"
  NodeExp: "Node Exporter"
  Kubelet: "Kubelet"
  cAdvisor: "cAdvisor"
  KSM: "Kube-State-Metrics"
}

Observability: {
  class: data
  Prom: "Prometheus Operator"
  Loki: "Loki"
  Alert: "Alertmanager"
}

UX: {
  class: ui
  Grafana: "Grafana"
  Pyrra: "Pyrra (SLOs)"
}

Nodes.Pods -> Nodes.Fluent: "Logs"
Nodes.Fluent -> Observability.Loki: "push"
Nodes.Pods -> Observability.Prom: "app metrics"
Nodes.NodeExp -> Observability.Prom: "node metrics"
Nodes.Kubelet -> Observability.Prom: "kubelet metrics"
Nodes.cAdvisor -> Observability.Prom: "cAdvisor"
Nodes.KSM -> Observability.Prom: "cluster metrics"
Observability.Prom -> Observability.Alert: "alerts"
Observability.Prom -> UX.Grafana: "datasource"
Observability.Loki -> UX.Grafana: "logs datasource"
UX.Pyrra -> Observability.Prom: "reads SLO burn rates"