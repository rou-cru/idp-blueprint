direction: right

classes: { actor: { style.fill: "#0f172a"; style.stroke: "#38bdf8"; style.font-color: white }
           gov: { style.fill: "#111827"; style.stroke: "#6366f1"; style.font-color: white }
           ui: { style.fill: "#7c3aed"; style.stroke: "#a855f7"; style.font-color: white }
           domain: { style.fill: "#0f766e"; style.stroke: "#34d399"; style.font-color: white } }

Lifecycle: {
  class: gov
  label: "Policy lifecycle"
  Repo: "Git: Policies/"
  Argo: "ArgoCD policy app"
  Kyverno: "Kyverno controllers"
  Cluster: {
    class: domain
    label: "Cluster scope"
    Work: "Workloads"
    Ns: "Namespaces"
  }
Reporter: {
  class: ui
  label: "Reporting UI"
  PR: "Policy Reporter"
  Grafana: "Grafana (dashboards)"
}
}

Author: { class: actor; label: "Engineer" }

Author -> Lifecycle.Repo: "author / review"
Lifecycle.Repo -> Lifecycle.Argo: "commit â†’ sync"
Lifecycle.Argo -> Lifecycle.Kyverno: "apply"
Lifecycle.Kyverno -> Lifecycle.Cluster.Work: "mutate/enforce"
Lifecycle.Kyverno -> Lifecycle.Cluster.Ns: "validate labels"
Lifecycle.Kyverno -> Lifecycle.Reporter.PR: "PolicyReports"
Lifecycle.Reporter.PR -> Lifecycle.Reporter.Grafana: "dashboards/metrics"
Lifecycle.Reporter.Grafana -> Author: "status + alerts"