direction: right

classes: {
  control: {
    style: {
      fill: "#111827"
      stroke: "#6366f1"
      font-color: white
    }
  }
  infra: {
    style: {
      fill: "#0f172a"
      stroke: "#38bdf8"
      font-color: white
    }
  }
  data: {
    style: {
      fill: "#0f766e"
      stroke: "#34d399"
      font-color: white
    }
  }
  workload: {
    style: {
      fill: "#7c3aed"
      stroke: "#a855f7"
      font-color: white
    }
  }
}

title: {
  label: "Component Addition Flow"
  near: top-center
  shape: text
  style: {
    font-size: 24
    bold: true
  }
}

# Git Commit
git: {
  class: data
  shape: page
  label: "Git Commit\nK8s/observability/kubecost/"
}

# ApplicationSet Detection
appset: {
  class: control
  shape: hexagon
  label: "ApplicationSet Generator\nDirectory scan"
}

# Application Creation
argocd: {
  class: control
  shape: cylinder
  label: "ArgoCD\nobservability-kubecost\nApplication"
}

# Sync & Deploy
cluster: {
  class: infra
  shape: cloud
  label: "Cluster Sync\ngovernance → component"
}

# Connections with labels
git -> appset: "push" {
  style: {
    stroke-width: 3
    animated: true
  }
}

appset -> argocd: "generates" {
  style: {
    stroke-width: 3
    animated: true
  }
}

argocd -> cluster: "deploys" {
  style: {
    stroke-width: 3
    animated: true
  }
}

# Result indicator
result: {
  class: workload
  shape: document
  label: "✓ Component Running\n✓ Automatically Integrated"
}

cluster -> result: {
  style: {
    stroke-dash: 3
  }
}
